<!DOCTYPE html>
<html>
<head>
    <title>Asteroid Hater</title>

    <!--<script>
    (function(win, doc){
    if(win.addEventListener)return;     //No need to polyfill
 
    function docHijack(p){var old = doc[p];doc[p] = function(v){return addListen(old(v))}}
    function addEvent(on, fn, self){
        return (self = this).attachEvent('on' + on, function(e){
            var e = e || win.event;
            e.preventDefault  = e.preventDefault  || function(){e.returnValue = false}
            e.stopPropagation = e.stopPropagation || function(){e.cancelBubble = true}
            fn.call(self, e);
        });
    }
    function addListen(obj, i){
        if(i = obj.length)while(i--)obj[i].addEventListener = addEvent;
        else obj.addEventListener = addEvent;
        return obj;
    }
 
    addListen([doc, win]);
    if('Element' in win)win.Element.prototype.addEventListener = addEvent;          //IE8
    else{       //IE < 8
        doc.attachEvent('onreadystatechange', function(){addListen(doc.all)});      //Make sure we also init at domReady
        docHijack('getElementsByTagName');
        docHijack('getElementById');
        docHijack('createElement');
        addListen(doc.all); 
    }
})(window, document);
    </script>-->

    <meta http-equiv="X-UA-Compatible" content="IE=IE9" >
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />

    <link rel="shortcut icon" href="favicon.ico">
    <link rel="image_src" href="web-image.jpg">
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">

    <script src="http://o.aolcdn.com/gamesdevcenter/sdk/v1/GamesSDK.js" type="text/javascript"></script> 

    <!-- Facebook meta-tags -->
    <meta property="og:url" content="">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="web-image.jpg">

    <!-- Twitter Card properties -->
    <meta name="twitter:card" content="photo" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:site" content="" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:image:width" content="280">
    <meta name="twitter:image:height" content="158">

    <meta name="viewport"/>

    <!--[DISABLED-if IE]><script type="text/javascript" src="js/lib/excanvas.compiled.js"></script><![endif]-->


    <!--<script>
        if (typeof G_vmlCanvasManager !== 'undefined') {
            document.originalCreateElement = document.createElement;
            document.createElement = function(elementName) {
                var e = document.originalCreateElement(elementName);
                if (elementName == 'canvas') {
                    console.log('Initializing ', e);
                    G_vmlCanvasManager.initElement(e);
                }
                return e;
            };
        }
    </script>-->

    <script src="http://sdk.tresensa.com/lib/viewporter.js"></script>
    <script src="http://sdk.tresensa.com/lib/PxLoader.js"></script>
    <script src="http://sdk.tresensa.com/lib/PxLoaderImage.js"></script>
    <script src="js/lib/tge-debug-0.3.4.js"></script>
    <script src="js/lib/font.js"></script>
    <script src="js/game/main.js"></script>
    <script src="js/game/Spaceship.js"></script>
    <script src="js/game/Spawner.js"></script>
    <script src="js/game/Asteroid.js"></script>
    <script src="js/game/BackgroundManager.js"></script>
    <script src="js/game/Bullet.js"></script>
    <script src="js/game/ui/LoadingScreen.js"></script>
    <script src="js/game/ui/MainMenu.js"></script>
    <script src="js/game/ui/PauseScreen.js"></script>
    <script src="js/game/ui/GameOver.js"></script>
    <script src="js/game/ui/HighScore.js"></script>
    <script src="js/game/ui/HelpScreen.js"></script>

    <script src="js/lib/head.min.js"></script>
    <script src="js/game.js"></script>

    <script>

        if (!document.createElement('canvas').getContext) {
            window.location = 'movie.html';
        }

        if (!window.console) {
            window.console = {
                error: function() {},
                warn: function() {},
                log: function() {}
            };
        }

        function handleError(label) {
            return function(response) {
                console.error(label, JSON.stringify(response));
            };
        };

        window.inDevMode = (location.href.match(/localhost/) || location.href.match(/^file/) || location.href.match(/dev\.asteroidhater\.com/));

        if (window.inDevMode && !location.href.match('accessToken=')) {
            location.href = '#gameId=121540&accessToken=121540_cg85w9yvtvmhk4r1cnnk_j3zqsf0ftctfbdp5ztjvpm655t';
            location.reload();
        }

        GAMESAPI.setGameSecret('kvk6vlbtps79zyb2cp9y3wffds');
        GAMESAPI.beginGameSession(function(response) {
            GAMESAPI.getPlayerInfo(function(r) {
                console.log('logged in as', r.data);
            });
        }, handleError('beginGameSession'));
    </script>

</head>

<body>

<div id="wrong_orientation"></div>

<div id="viewporter" align="center" width="100%">
    <!-- landscape game -->
    <div id="game_canvas" style="position:relative; width:960px; height:536px; text-align: center;"></div>
    <!-- portrait game -->
    <div id="game_canvas" style="position:relative; width:640px; height:832px; text-align: center;">
        <video id="video_player" style="height: 100%; width: 100%; display:none" src="" preload="auto">
    </div> 
    <div id="social_leaderboard"></div>
</div>

<div id="fb-root"></div>
</body>

</html>
